{"version":3,"sources":[null,"webpack:///E:/my-music/components/play/play.vue?c4db","webpack:///E:/my-music/components/play/play.vue?9387","webpack:///E:/my-music/components/play/play.vue?9f3b","uni-app:///components/play/play.vue","webpack:///E:/my-music/components/play/play.vue?78bf","webpack:///E:/my-music/components/play/play.vue?c10d"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AAC+L;AAC/L,gBAAgB,wMAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,yMAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAguB,CAAgB,qvBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsEpvB;AACA,MADA,kBACA;AACA;AACA,iDADA;AAEA,oBAFA;AAGA,iBAHA;AAIA,mBAJA;AAKA,qBALA;AAMA,sBANA;AAOA,gCAPA;AAQA,+BARA;AASA,gBATA;AAUA,mBAVA;AAWA,iBAXA;AAYA,gBAZA;AAaA;AACA,2BADA;AAEA,uBAFA;AAGA,sBAHA;AAIA,4BAJA;AAKA,kBALA;AAMA,mBANA;AAOA,0CAPA;AAQA,iCARA,EAbA;;AAuBA,uBAvBA;AAwBA,kBAxBA;AAyBA,qBAzBA;AA0BA,qBA1BA;AA2BA,uBA3BA;AA4BA,kBA5BA;AA6BA;AACA,gEADA;AAEA,iEAFA;AAGA,iEAHA,EA7BA;;;AAmCA,GArCA;AAsCA;AACA,0BADA,EAtCA;;AAyCA,SAzCA,qBAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SATA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,EAIA,GAJA;AAKA;AACA,OAzBA,MAyBA;AACA;AACA;AACA,KA7BA;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OATA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,EAIA,GAJA;AAKA;AACA,GAhGA;AAiGA;AACA,aADA,qBACA,EADA,EACA;AACA;AACA,KAHA;AAIA,YAJA,sBAIA;AACA;AACA,KANA;AAOA,gBAPA,0BAOA;AACA;AACA,KATA;AAUA,SAVA,mBAUA;AACA,kCADA,CACA;AACA,KAZA;AAaA,cAbA,wBAaA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAnBA;AAoBA,eApBA,uBAoBA,IApBA,EAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhCA;AAiCA,QAjCA,kBAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAdA,MAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SA9BA,MA8BA;AACA,OAhCA;AAiCA,KAzEA;AA0EA,OA1EA,iBA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAZA,MAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SA3BA,MA2BA;AACA,OA7BA;AA8BA,KA5GA;AA6GA,aA7GA,uBA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAPA,MAOA;AACA;AACA;AACA;AACA;AACA,SAHA,EAGA,EAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA,SATA,EASA,IATA;AAUA;AACA;AACA;AACA;AACA;AACA,OAJA,EAIA,GAJA;AAKA,KAnJA;AAoJA,kBApJA,0BAoJA,CApJA,EAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OATA,MASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA1KA,EAjGA,E;;;;;;;;;;;;;ACtEA;AAAA;AAAA;AAAA;AAAsiC,CAAgB,giCAAG,EAAC,C;;;;;;;;;;;ACA1jC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/play/play.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./play.vue?vue&type=template&id=f378b1f8&\"\nvar renderjs\nimport script from \"./play.vue?vue&type=script&lang=js&\"\nexport * from \"./play.vue?vue&type=script&lang=js&\"\nimport style0 from \"./play.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/play/play.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./play.vue?vue&type=template&id=f378b1f8&\"","var components = {\n  popupLayer: function() {\n    return import(\n      /* webpackChunkName: \"components/popup-layer/popup-layer\" */ \"@/components/popup-layer/popup-layer.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./play.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./play.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"\">\r\n\t\t<view class=\"content\">\r\n\t\t\t<view class=\"player-box\">\r\n\t\t\t\t<view class=\"\" style=\"display: flex;align-items: center;margin-bottom: 10rpx;\">\r\n\t\t\t\t\t<image :src=\"currentImg\" style=\"width: 100rpx;height: 100rpx;border-radius: 34rpx;margin-right: 20rpx;\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"\" style=\"font-size: 26rpx;\">\r\n\t\t\t\t\t\t<p style=\"margin-right: 10px;\">歌曲：{{ currentName }}</p>\r\n\t\t\t\t\t\t<p>歌手：{{ currentSonger }}</p>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"player-slider\">\r\n\t\t\t\t\t<view class=\"player-currentTime\">\r\n\t\t\t\t\t\t{{audioCurTime[0]}}:{{audioCurTime[1]}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<slider class=\"slider\" min=\"0\" :max=\"duration\" :value=\"currentTime\" activeColor=\"#ccc\" backgroundColor=\"#eee\"\r\n\t\t\t\t\t block-size=\"16\" @change=\"changeProgress\" />\r\n\t\t\t\t\t<view class=\"player-duration\">\r\n\t\t\t\t\t\t<!-- 音频总时长用的是后端的数据，如果用innerAudioContext对象的duration在切换歌曲的时候会出现计算错误的情况 -->\r\n\t\t\t\t\t\t{{longth}}\r\n\t\t\t\t\t\t<!-- {{audioDuration[0]}}:{{audioDuration[1]}} -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"play-bar\">\r\n\t\t\t\t\t<view class=\"\" @click='pre'>\r\n\t\t\t\t\t\t<text class=\"cuIcon-backwardfill\" style=\"color: #ccc;\"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"play-menu\">\r\n\t\t\t\t\t\t<text class=\"cuIcon-playfill\" style=\"color: #ccc;\" :class=\"isPlay?'cuIcon-stop':'cuIcon-playfill'\" @tap=\"playMusic\"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"\" @click='next'>\r\n\t\t\t\t\t\t<text class=\"cuIcon-play_forward_fill\" style=\"color: #ccc;\"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"\" style=\"display: flex;align-items: center;\">\r\n\t\t\t\t\t\t<image :src=\"changeImg[playType]\" style=\"width: 50rpx;height: 50rpx;\" mode=\"\" @click=\"changeType\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"\" style=\"display: flex;align-items: center;\">\r\n\t\t\t\t\t\t<image src=\"../../static/list.png\" style=\"width: 40rpx;height: 40rpx;\" mode=\"\" @click=\"viewPlayList\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<popup-layer ref=\"popupRef\" :direction=\"'top'\">\r\n\t\t\t<view class=\"\" style=\"height: 50vh;overflow: auto;padding: 10px;\">\r\n\t\t\t\t<h5 style=\"margin-bottom: 10px;\">播放列表</h5>\r\n\t\t\t\t<view class=\"\" v-if=\"audioData.length === 0\" style=\"font-size: 28rpx;text-align: center;margin-top: 50%;transform: translateY(-50%);\">\r\n\t\t\t\t\t列表空空，赶紧选歌吧！\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"content\" style=\"font-size: 24rpx;\" v-else>\r\n\t\t\t\t\t<view class=\"\" @click=\"playItem\" style=\"width: 100%;display: flex;margin-bottom: 40rpx;position: relative;\" v-for=\"(item,index) in audioData\" :key=\"index\">\r\n\t\t\t\t\t\t<image :src=\"item.view_image\" style=\"width: 80rpx;height: 80rpx;border-radius: 20rpx;margin-right: 20rpx;\" mode=\"\"></image>\r\n\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t<p style=\"margin-bottom: 16rpx;\">歌曲：{{ item.name }}</p>\r\n\t\t\t\t\t\t\t<p>歌手：{{ item.singer }}</p>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<image  style=\"width: 50rpx;height: 50rpx;position: absolute;right: 0;\" src=\"../../static/close.png\" mode=\"\" @click.stop=\"closeItem(item.id)\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"box\" style=\"margin-bottom: 50px;\">\r\n\t\t\t\t<view class=\"\" @click=\"close\" style=\"text-align: center;border-top: 1px solid #ccc;padding:20rpx 0;\">\r\n\t\t\t\t\t<text>取消</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</popup-layer>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport popupLayer from '../popup-layer/popup-layer.vue'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\taudioContext: uni.createInnerAudioContext(),\r\n\t\t\t\tcurrentImg: '',\r\n\t\t\t\tplayType: 0,\r\n\t\t\t\taudioData: [],\r\n\t\t\t\tduration: '100',\r\n\t\t\t\tcurrentTime: '0',\r\n\t\t\t\taudioDuration: ['0', '00'],\r\n\t\t\t\taudioCurTime: ['0', '00'],\r\n\t\t\t\tlongth: '',\r\n\t\t\t\tisPlay: false,\r\n\t\t\t\ttimer: null,\r\n\t\t\t\tsystem: '',\r\n\t\t\t\tstyleObj: {\r\n\t\t\t\t\tborderRadius: '50%',\r\n\t\t\t\t\theight: '80rpx',\r\n\t\t\t\t\twidth: '80rpx',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '50%',\r\n\t\t\t\t\tleft: '50%',\r\n\t\t\t\t\ttransform: 'translate(-50%,-50% )',\r\n\t\t\t\t\ttransformOrigin: 'center'\r\n\t\t\t\t},\r\n\t\t\t\trotateTimer: null,\r\n\t\t\t\trotateDeg: 0,\r\n\t\t\t\tcurrentName: '',\r\n\t\t\t\tcurrentIndex: 0,\r\n\t\t\t\tcurrentSonger: '',\r\n\t\t\t\tplayList:[],\r\n\t\t\t\tchangeImg: {\r\n\t\t\t\t\t0: require(\"../../static/cycle.png\"),\r\n\t\t\t\t\t1: require(\"../../static/random.png\"),\r\n\t\t\t\t\t2: require(\"../../static/single.png\")\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tpopupLayer\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.$EventBus.$on('getSong',(obj)=>{\r\n\t\t\t\tif(this.audioData.length === 0){\r\n\t\t\t\t\tthis.audioData.push(obj)\r\n\t\t\t\t\tthis.audioContext.autoplay = false;\r\n\t\t\t\t\tthis.audioContext.src = this.audioData[0].file\r\n\t\t\t\t\tthis.longth = this.audioData[0].longth\r\n\t\t\t\t\tthis.system = uni.getSystemInfoSync().platform\r\n\t\t\t\t\tthis.audioContext.onEnded((e) => {\r\n\t\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\t\tclearInterval(this.rotateTimer)\r\n\t\t\t\t\t\tthis.timer = null\r\n\t\t\t\t\t\tthis.rotateTimer = null\r\n\t\t\t\t\t\tthis.isPlay = false\r\n\t\t\t\t\t\tthis.audioContext.seek(0);\r\n\t\t\t\t\t\tthis.audioCurTime = ['0', '00']\r\n\t\t\t\t\t\tthis.currentTime = '0'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.currentName = this.audioData[0].name\r\n\t\t\t\t\tthis.currentSonger = this.audioData[0].singer\r\n\t\t\t\t\tthis.currentImg = this.audioData[0].view_image\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tvar minutes = parseInt(this.audioContext.duration / 60, 10);\r\n\t\t\t\t\t\tvar seconds = parseInt(this.audioContext.duration % 60);\r\n\t\t\t\t\t\tthis.longth = minutes + \":\" + seconds\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t\tthis.playMusic()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.audioData.push(obj)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif(this.audioData.length > 0){\r\n\t\t\t\tthis.audioContext.autoplay = false;\r\n\t\t\t\tthis.audioContext.src = this.audioData[0].file\r\n\t\t\t\tthis.longth = this.audioData[0].longth\r\n\t\t\t\tthis.system = uni.getSystemInfoSync().platform\r\n\t\t\t\tthis.audioContext.onEnded((e) => {\r\n\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\tclearInterval(this.rotateTimer)\r\n\t\t\t\t\tthis.timer = null\r\n\t\t\t\t\tthis.rotateTimer = null\r\n\t\t\t\t\tthis.isPlay = false\r\n\t\t\t\t\tthis.audioContext.seek(0);\r\n\t\t\t\t\tthis.audioCurTime = ['0', '00']\r\n\t\t\t\t\tthis.currentTime = '0'\r\n\t\t\t\t})\r\n\t\t\t\tthis.currentName = this.audioData[0].name\r\n\t\t\t\tthis.currentSonger = this.audioData[0].singer\r\n\t\t\t\tthis.currentImg = this.audioData[0].view_image\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tvar minutes = parseInt(this.audioContext.duration / 60, 10);\r\n\t\t\t\t\tvar seconds = parseInt(this.audioContext.duration % 60);\r\n\t\t\t\t\tthis.longth = minutes + \":\" + seconds\r\n\t\t\t\t}, 500)\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcloseItem(id){\r\n\t\t\t\tthis.audioData = this.audioData.filter(v => v.id !== id)\r\n\t\t\t},\r\n\t\t\tplayItem(){\r\n\t\t\t\tconsole.log(\"点击歌曲\")\r\n\t\t\t},\r\n\t\t\tviewPlayList() {\r\n\t\t\t\tthis.$refs.popupRef.show();\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.$refs.popupRef.close(); // 或者 boolShow = false\r\n\t\t\t},\r\n\t\t\tchangeType() {\r\n\t\t\t\tif (this.playType === 2) {\r\n\t\t\t\t\tthis.playType = 0\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.playType = this.playType + 1\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchangeAudio(info) {\r\n\t\t\t\tthis.currentTime = '0'\r\n\t\t\t\tthis.isPlay = false\r\n\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\tthis.timer = null\r\n\t\t\t\tclearInterval(this.rotateTimer)\r\n\t\t\t\tthis.rotateTimer = null\r\n\t\t\t\tthis.longth = info.longth\r\n\t\t\t\tthis.audioCurTime = ['0', '00']\r\n\t\t\t\tthis.duration = info.longth.slice(0, 2) * 60 + parseInt(info.longth.slice(3, 6))\r\n\t\t\t\tthis.audioContext.seek(0);\r\n\t\t\t\tthis.currentName = info.name\r\n\t\t\t},\r\n\t\t\tnext() {\r\n\t\t\t\t// next song function, the main thought of next song function is that we should find out the index of song which is playing. \r\n\t\t\t\t// first of all , clear the timer and stop rotating cover, and then find out the index \r\n\t\t\t\tclearInterval(this.rotateTimer)\r\n\t\t\t\tthis.rotateTimer = null\r\n\t\t\t\tlet src = this.audioContext.src\r\n\t\t\t\t//tips: (complex array may cause performance issues)\r\n\t\t\t\tthis.audioData.filter((currentValue, index, arr) => {\r\n\t\t\t\t\tif (currentValue.file == src) {\r\n\t\t\t\t\t\tif (index + 1 >= arr.length) {\r\n\t\t\t\t\t\t\tthis.currentIndex = 0\r\n\t\t\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\t\t\tlet timer = null\r\n\t\t\t\t\t\t\tthis.isPlay = false;\r\n\t\t\t\t\t\t\t// once click next button , pause and reset playingtime \r\n\t\t\t\t\t\t\tthis.audioContext.seek(0);\r\n\t\t\t\t\t\t\tthis.currentTime = '0'\r\n\t\t\t\t\t\t\tthis.audioCurTime = ['0', '00']\r\n\t\t\t\t\t\t\tthis.audioContext.src = this.audioData[0].file\r\n\t\t\t\t\t\t\tthis.longth = this.audioData[0].longth\r\n\t\t\t\t\t\t\tthis.currentName = this.audioData[0].name\r\n\t\t\t\t\t\t\tthis.currentSonger = this.audioData[0].singer\r\n\t\t\t\t\t\t\tthis.currentImg = this.audioData[0].view_image\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.currentIndex = index + 1\r\n\t\t\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\t\t\tlet timer = null\r\n\t\t\t\t\t\t\tthis.isPlay = false;\r\n\t\t\t\t\t\t\tthis.audioContext.seek(0);\r\n\t\t\t\t\t\t\tthis.currentTime = '0'\r\n\t\t\t\t\t\t\tthis.audioCurTime = ['0', '00']\r\n\t\t\t\t\t\t\tthis.audioContext.src = this.audioData[index + 1].file\r\n\t\t\t\t\t\t\tthis.longth = this.audioData[index + 1].longth\r\n\t\t\t\t\t\t\tthis.currentName = this.audioData[index + 1].name\r\n\t\t\t\t\t\t\tthis.currentSonger = this.audioData[index + 1].singer\r\n\t\t\t\t\t\t\tthis.currentImg = this.audioData[index + 1].view_image\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.playMusic()\r\n\t\t\t\t\t} else {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpre() {\r\n\t\t\t\tclearInterval(this.rotateTimer)\r\n\t\t\t\tthis.rotateTimer = null\r\n\t\t\t\tlet src = this.audioContext.src\r\n\t\t\t\tthis.audioData.filter((currentValue, index, arr) => {\r\n\t\t\t\t\tif (currentValue.file == src) {\r\n\t\t\t\t\t\tif (index == 0) {\r\n\t\t\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\t\t\tlet timer = null\r\n\t\t\t\t\t\t\tthis.isPlay = false;\r\n\t\t\t\t\t\t\tthis.audioContext.seek(0);\r\n\t\t\t\t\t\t\tthis.currentTime = '0'\r\n\t\t\t\t\t\t\tthis.audioCurTime = ['0', '00']\r\n\t\t\t\t\t\t\tthis.audioContext.src = this.audioData[arr.length - 1].file\r\n\t\t\t\t\t\t\tthis.longth = this.audioData[arr.length - 1].longth\r\n\t\t\t\t\t\t\tthis.currentName = this.audioData[arr.length - 1].name\r\n\t\t\t\t\t\t\tthis.currentSonger = this.audioData[arr.length - 1].singer\r\n\t\t\t\t\t\t\tthis.currentImg = this.audioData[arr.length - 1].view_image\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\t\t\tlet timer = null\r\n\t\t\t\t\t\t\tthis.isPlay = false;\r\n\t\t\t\t\t\t\tthis.audioContext.seek(0);\r\n\t\t\t\t\t\t\tthis.currentTime = '0'\r\n\t\t\t\t\t\t\tthis.audioCurTime = ['0', '00']\r\n\t\t\t\t\t\t\tthis.audioContext.src = this.audioData[index - 1].file\r\n\t\t\t\t\t\t\tthis.longth = this.audioData[index - 1].longth\r\n\t\t\t\t\t\t\tthis.currentName = this.audioData[index - 1].name\r\n\t\t\t\t\t\t\tthis.currentSonger = this.audioData[index - 1].singer\r\n\t\t\t\t\t\t\tthis.currentImg = this.audioData[index - 1].view_image\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.playMusic()\r\n\t\t\t\t\t} else {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tplayMusic() {\r\n\t\t\t\t// reset duration time by clicking midbutton only\r\n\t\t\t\tlet duration = this.audioContext.duration;\r\n\t\t\t\tlet currentTime = this.audioContext.currentTime;\r\n\t\t\t\tthis.duration = duration;\r\n\t\t\t\tthis.currentTime = currentTime;\r\n\t\t\t\tthis.audioCurTime[0] = Math.floor(Math.floor(currentTime) / 60);\r\n\t\t\t\tthis.audioCurTime[1] = Math.floor(currentTime) % 60;\r\n\t\t\t\tif (this.isPlay) {\r\n\t\t\t\t\tthis.isPlay = false;\r\n\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\tclearInterval(this.rotateTimer)\r\n\t\t\t\t\tthis.timer = null\r\n\t\t\t\t\tthis.rotateTimer = null\r\n\t\t\t\t\tthis.audioContext.pause();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isPlay = true;\r\n\t\t\t\t\tthis.rotateTimer = setInterval(() => {\r\n\t\t\t\t\t\tthis.rotateDeg++\r\n\t\t\t\t\t\tthis.styleObj.transform = `translate(-50%,-50%) rotate(${this.rotateDeg}deg)`\r\n\t\t\t\t\t}, 50)\r\n\t\t\t\t\tthis.audioContext.play();\r\n\t\t\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\t\t\tthis.currentTime++\r\n\t\t\t\t\t\tif (this.audioCurTime[1] > 58) {\r\n\t\t\t\t\t\t\tthis.audioCurTime[0]++\r\n\t\t\t\t\t\t\tthis.audioCurTime[1] = 0\r\n\t\t\t\t\t\t\tthis.audioCurTime[1]++\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.audioCurTime[1]++\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tvar minutes = parseInt(this.audioContext.duration / 60, 10);\r\n\t\t\t\t\tvar seconds = parseInt(this.audioContext.duration % 60);\r\n\t\t\t\t\tthis.longth = minutes + \":\" + seconds\r\n\t\t\t\t}, 500)\r\n\t\t\t},\r\n\t\t\tchangeProgress(e) {\r\n\t\t\t\t// ios 拖动slider 会出现漂移，定位不准，苹果暂时用拖动时暂停播放来规避\r\n\t\t\t\t// ios pause music when dragging , Android could still play\r\n\t\t\t\tthis.audioContext.seek(e.detail.value);\r\n\t\t\t\t// pause music when dragging , in order to load timer repeatly\r\n\t\t\t\tif (this.system == 'ios') {\r\n\t\t\t\t\tthis.audioCurTime[0] = Math.floor(Math.floor(e.detail.value) / 60);\r\n\t\t\t\t\tthis.audioCurTime[1] = Math.floor(e.detail.value) % 60;\r\n\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\tclearInterval(this.rotateTimer)\r\n\t\t\t\t\tthis.timer = null\r\n\t\t\t\t\tthis.rotateTimer = null\r\n\t\t\t\t\tthis.isPlay = false\r\n\t\t\t\t\tthis.audioContext.pause();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\tclearInterval(this.rotateTimer)\r\n\t\t\t\t\tthis.timer = null\r\n\t\t\t\t\tthis.rotateTimer = null\r\n\t\t\t\t\tthis.isPlay = false;\r\n\t\t\t\t\tthis.playMusic()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import url(\"../../colorui/main.css\");\r\n\t@import url(\"../../colorui/icon.css\");\r\n\t@import url(\"./index.css\");\r\n</style>\n","import mod from \"-!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./play.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./play.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1622805083156\n      var cssReload = require(\"F:/HBuilderX.2.9.8.20201110/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}